# TP Chapitre 1 ‚Äì Pipeline simple üöÄ

## Contexte / Storytelling
Bienvenue dans la startup GFP Tech !  
Votre √©quipe commence tout juste √† travailler sur un projet Java/Maven. L'objectif est de mettre en place **le premier pipeline CI/CD** pour automatiser le build et les tests unitaires.  
Cette premi√®re √©tape vous permettra de comprendre les bases de Jenkins, de cr√©er un `Jenkinsfile` et d‚Äôex√©cuter votre pipeline.

---

## Objectifs p√©dagogiques
- D√©couvrir Jenkins et l‚Äôinterface utilisateur.  
- Comprendre les concepts de **pipeline d√©claratif**.  
- Cr√©er et ex√©cuter un pipeline simple.  
- Visualiser les logs et les r√©sultats des builds.  
- V√©rifier le succ√®s des tests unitaires Maven.

---

## Pr√©requis techniques
- Jenkins install√© et accessible (Master).  
- GitLab ou autre repo Git avec un projet Maven simple.  
- Maven install√© sur le Master ou dans l‚Äôagent Jenkins.  
- Acc√®s au terminal ou interface Jenkins.

---

## √âtapes d√©taill√©es

### **1. Pr√©parer le projet**
1. Cr√©er un nouveau projet Maven Java sur GitLab :
   ```bash
   mvn archetype:generate -DgroupId=com.gfptech -DartifactId=demo-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false
   ```
2. Initialiser le d√©p√¥t Git :
   ```bash
   cd demo-app
   git init
   git add .
   git commit -m "Initial commit"
   git push -u origin main
   ```

### **2. Cr√©er un Jenkinsfile**
1. √Ä la racine du projet, cr√©er un fichier `Jenkinsfile` :
   ```groovy
   pipeline {
       agent any
       stages {
           stage('Build') {
               steps {
                   echo 'üõ†Ô∏è Build en cours...'
                   sh 'mvn clean compile'
               }
           }
           stage('Test') {
               steps {
                   echo '‚úÖ Tests unitaires...'
                   sh 'mvn test'
               }
           }
       }
   }
   ```
2. Commiter et pousser le Jenkinsfile dans GitLab :
   ```bash
   git add Jenkinsfile
   git commit -m "Add Jenkinsfile"
   git push
   ```

### **3. Cr√©er un pipeline Jenkins**
1. Dans Jenkins, cr√©er un **nouveau pipeline multibranch** ou simple li√© au repo GitLab.  
2. Configurer l‚ÄôURL du repo et les identifiants si n√©cessaire.  
3. D√©tecter automatiquement le `Jenkinsfile` et sauvegarder la configuration.

### **4. Ex√©cuter le pipeline**
1. Cliquer sur **Build Now** pour d√©clencher le pipeline.  
2. Observer les √©tapes : Build ‚Üí Test.  
3. V√©rifier les logs pour chaque √©tape :
   - Compilation Maven  
   - R√©sultat des tests unitaires  

### **5. Modifier et rejouer**
1. Ajouter un nouveau test unitaire simple dans `src/test/java`.  
2. Commit et push les modifications.  
3. Observer que le pipeline se d√©clenche automatiquement (si Webhooks activ√©s).  

---

## Livrable final
- Pipeline Jenkins fonctionnel qui :  
  - Compile le projet Maven  
  - Ex√©cute les tests unitaires  
  - Affiche les logs correctement  
- Projet GitLab avec `Jenkinsfile` √† jour.

---

## Bonus (optionnel)
- Ajouter un **stage ‚ÄúReports‚Äù** pour g√©n√©rer un rapport JUnit :
   ```groovy
   stage('Reports') {
       steps {
           junit '**/target/surefire-reports/*.xml'
       }
   }
   ```
- Observer les r√©sultats directement dans Jenkins.
~~~

